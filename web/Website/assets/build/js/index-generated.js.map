{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","logger.js","newsAggregation/components/newsListing.js","newsAggregation/newsAggregation.js","newsAggregation/services/newsService.js"],"names":[],"mappings":"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","file":"index-generated.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// To use npm for external dependencies:\n// npm install --save jquery\n// import $ from 'jquery';\nimport angular from 'angular';\nimport ngCookies from 'angular-cookies';\nimport newsAggregation from './newsAggregation/newsAggregation';\nimport logger from './logger.js';\n\nangular.module('newsAggregator',[\n  'ngCookies',\n  'newsAggregator.newsAggregation'\n]);\n\n","\nexport default {\n    log: function(message){\n        console.log(\"logger says: \" + message);\n    }\n};\n","export const NewsListing = {\n  templateUrl: '/assets/js-source/newsAggregation/views/sources.html',\n  controller: ['newsService', '$scope', '$cookies', NewsListingController],\n  bindings: {\n    sources: '<',\n    articles: '<'\n  }\n};\n\nfunction NewsListingController(newsService, $scope, $cookies) {\n  var vm = this;\n  vm.sourcesSelection = [];\n  vm.articles = [];\n  vm.loading = false;\n  newsService.getSources().then( sources => {\n    vm.sources = sources;\n  });\n\n  vm.getArticles = function(sourceId) {\n    var sourceIndex = vm.sourcesSelection.indexOf(sourceId);\n\n    if (sourceIndex > -1) {\n      vm.sourcesSelection.splice(sourceIndex, 1);\n    } else {\n      vm.sourcesSelection.push(sourceId);\n    }\n\n    if (vm.sourcesSelection.length === 0) {\n      setUserSources(true);\n    }\n\n    updateArticles(vm.sourcesSelection);\n  };\n\n  vm.populateArticles = function() {\n    var storedSourceSelection = $cookies.get('selectedSources');\n    if (storedSourceSelection) {\n      vm.sourcesSelection = storedSourceSelection.split(',');\n      updateArticles(vm.sourcesSelection);\n    }\n  };\n\n  function updateArticles(sources, sortBy) {\n    vm.loading = true;\n\n    if (sources.length) {\n      vm.articles = [];\n      for (var i = 0; i < sources.length; i++){\n        newsService.getArticles(sources[i], sortBy).then( articles => {\n          Array.prototype.push.apply(vm.articles, articles);\n\n          if (i === sources.length) {\n            vm.loading = false;\n          }\n        });  \n      }\n    } else {\n      vm.articles = [];\n      vm.loading = false;\n    }\n    setUserSources();\n  }\n\n  function setUserSources(emptyCookie) {\n    var expireDate = new Date();\n    expireDate.setDate(expireDate.getDate() + 100)\n    if (vm.sourcesSelection.length || emptyCookie) {\n      $cookies.put('selectedSources', vm.sourcesSelection, {'expires': expireDate});      \n    }\n  }\n}\n","// components\nimport { NewsListing } from './components/newsListing';\n\n// services\nimport { NewsService } from './services/newsService';\n\nlet app = angular.module('newsAggregator.newsAggregation',['ngCookies'])\n  .service('newsService',['$http', NewsService])\n  .component('newsListing', NewsListing);\n","export function NewsService($http) {\n  var newsApiKey = '99b5af62654743dca6f72791010d9b7b';\n\n  function getDataCompleted(response) {\n    return response.data;\n  }\n\n  function getDataFailed(error) {\n    console.log(error.data);\n  }\n\n  function getSources() {\n    var newsPromise;\n    \n    newsPromise = $http.get('https://newsapi.org/v1/sources')\n      .then(getDataCompleted)\n      .catch(getDataFailed);\n\n    return newsPromise.then(function(sources) {\n      return sources.sources;\n    });\n  };\n\n  function getArticles(source, sortBy) {\n    var newsArticles;\n    \n    newsArticles = $http.get('https://newsapi.org/v1/articles?source='+source+'&apiKey='+newsApiKey)\n      .then(getDataCompleted)\n      .catch(getDataFailed);\n\n    return newsArticles.then(function(articles) {\n      return articles.articles;\n    });\n  }\n\n  return {\n    getSources : getSources,\n    getArticles : getArticles\n  };\n}\n"]}